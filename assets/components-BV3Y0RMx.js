import{r as l,j as e,F as h,f as M,N as b,a as P,b as k,c as R,s as v,d as A,e as F,g as z,S,D as L,h as D,i as T,P as E,k as G}from"./vendor-Cg58ssI3.js";import{a as O}from"./utils-WGHN_NGi.js";const C=l.createContext(),_=()=>l.useContext(C),U=({children:s})=>{const[n,d]=l.useState({stations:null,devices:null,dateRange:{start:null,end:null}});return e.jsx(C.Provider,{value:{graphParameters:n,setGraphParameters:d},children:s})};function V(){return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"navigation__user",children:[e.jsx("img",{src:"./avatar.webp",alt:"María Pérez",className:"navigation__user--img"}),e.jsx("h5",{className:"navigation__user--name",children:"Valentina Muñoz"}),e.jsx("span",{children:"Usuario"})]})})}function W(){return e.jsx(e.Fragment,{children:e.jsx("section",{className:"navigation__logo",children:e.jsx("a",{href:"#",title:"Acustica Marina",children:e.jsx("img",{src:"./logo.webp",className:"w-36",alt:"Acustina Marina"})})})})}function q(){return e.jsx(e.Fragment,{children:e.jsxs("button",{className:"navigation__logout",children:[e.jsx(h,{icon:M}),e.jsx("span",{children:"Cerrar Sesión"})]})})}function J(){const s=({isActive:n})=>n?"navigation__link navigation__link--active group":"navigation__link group";return e.jsx(e.Fragment,{children:e.jsxs("ul",{className:"navigation__menu",children:[e.jsx("li",{children:e.jsxs(b,{to:"/","aria-label":"dashboard",className:s,children:[e.jsx(h,{icon:P}),e.jsx("span",{className:"-mr-1 font-medium",children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs(b,{to:"/menu2",className:s,disabled:!0,children:[e.jsx(h,{icon:k}),e.jsx("span",{children:"Por definir"})]})}),e.jsx("li",{children:e.jsxs(b,{to:"menu3",className:s,disabled:!0,children:[e.jsx(h,{icon:R}),e.jsx("span",{children:"Por definir"})]})})]})})}const $=[{id:9,devices:[{id:10}]},{id:10,devices:[{id:11}]}];function K(){const{setGraphParameters:s}=_(),[n,d]=l.useState(null),[p,g]=l.useState(null),[m,r]=l.useState([null,null]),[i,u]=l.useState(null),c=$.map(a=>({value:a.id,label:`Estación ${a.id}`,devices:a.devices})),x=a=>{d(a),g(null),u(null),r([null,null]),s(o=>({...o,stations:a?[a.value]:[],devices:[],dateRange:{start:null,end:null}}))},f=a=>{g(a),s(o=>({...o,devices:a?[a.value]:[]}))},y=a=>{if(u(a),a.id==="custom")r([null,null]);else{const[o,w]=a.value;r([o,w]),s(N=>({...N,dateRange:{start:D(o,"yyyy-MM-dd"),end:D(w,"yyyy-MM-dd")}}))}},j=a=>{r(a),a[0]&&a[1]&&s(o=>({...o,dateRange:{start:D(a[0],"yyyy-MM-dd"),end:D(a[1],"yyyy-MM-dd")}}))},t=[{id:"today",label:"Hoy",value:[v(),new Date]},{id:"lastWeek",label:"Última Semana",value:[A(v(),1),new Date]},{id:"last30Days",label:"Últimos 30 días",value:[F(v(),30),new Date]},{id:"last90Days",label:"Últimos 90 días",value:[z(v(),3),new Date]},{id:"custom",label:"Personalizado",value:null}];return e.jsxs("section",{className:"devices-selectors",children:[e.jsx(S,{id:"station-select",onChange:x,options:c,placeholder:"Seleccione una estación",value:n}),e.jsx(S,{id:"device-select",onChange:f,options:n?n.devices.map(a=>({value:a.id,label:`Dispositivo ${a.id}`})):[],placeholder:"Seleccione un dispositivo",value:p,isDisabled:!n}),e.jsxs("div",{children:[e.jsx(S,{id:"time-select",onChange:y,options:t,placeholder:"Seleccione un rango de tiempo rápido",value:i,getOptionLabel:a=>a.label,getOptionValue:a=>a.id,isDisabled:!n}),i&&i.id==="custom"&&e.jsx(L,{selectsRange:!0,startDate:m[0],endDate:m[1],onChange:j,isClearable:!0,placeholderText:"Selecciona un rango de fechas",dateFormat:"yyyy-MM-dd"})]})]})}const B=T(E);function Q(){const{graphParameters:s}=_(),[n,d]=l.useState([]),[p,g]=l.useState([]);l.useEffect(()=>{s.stations&&s.devices&&s.dateRange.start&&s.dateRange.end&&(async()=>{try{const c=(await O.get("MonitoringData.json")).data;if(Array.isArray(c)){const x=new Date(s.dateRange.start),f=new Date(s.dateRange.end),y=c.filter(t=>s.stations.includes(t.estacion)&&s.devices.includes(t.dispositivo)&&new Date(t.fecha_captura)>=x&&new Date(t.fecha_captura)<=f&&t.canal==="C1").sort((t,a)=>new Date(t.fecha_captura)-new Date(a.fecha_captura));d(y.map(t=>({x:t.fecha_captura,y:t.nps_global})));const j=c.filter(t=>s.stations.includes(t.estacion)&&s.devices.includes(t.dispositivo)&&new Date(t.fecha_captura)>=x&&new Date(t.fecha_captura)<=f&&t.canal==="C2").sort((t,a)=>new Date(t.fecha_captura)-new Date(a.fecha_captura));g(j.map(t=>({x:t.fecha_captura,y:t.nps_global})))}else console.error("Data fetched is not an array:",c)}catch(u){console.error("Error fetching data:",u)}})()},[s]);const m=[{x:n.map(i=>new Date(i.x)),y:n.map(i=>i.y),type:"scatter",mode:"lines+markers",line:{shape:"spline",color:"blue"},marker:{color:"blue"},name:"Canal C1"},{x:p.map(i=>new Date(i.x)),y:p.map(i=>i.y),type:"scatter",mode:"lines+markers",line:{shape:"spline",color:"red"},marker:{color:"red"},name:"Canal C2"}],r={width:1e3,height:440,title:{text:"NPS Global vs Tiempo por Canal",font:{family:"Arial, sans-serif",size:22,color:"#000",weight:"bold"}},xaxis:{title:"Fecha de Captura",type:"date",tickformat:"%d/%m/%y %H:%M",showgrid:!1,tickfont:{size:10},tickangle:15,zeroline:!0,showline:!0,linecolor:"black",linewidth:1},yaxis:{title:"NPS Global (dB)",showgrid:!1,automargin:!0,zeroline:!0,showline:!0,linecolor:"black",linewidth:1},legend:{x:.5,y:-.3,xanchor:"center",yanchor:"top",orientation:"h"}};return e.jsx(B,{data:m,layout:r,config:{displayModeBar:!0}})}function X(){return e.jsxs("div",{className:"alerts",children:[e.jsx("p",{children:"Selecciona una estación, un dispositivo y define un rango de fechas para visualizar la gráfica."}),e.jsxs("div",{className:"alerts--info",role:"alert",children:[e.jsx(h,{icon:G}),e.jsx("span",{children:'Para este ejemplo, utiliza el rango "Últimos 90 días".'})]})]})}export{V as A,K as D,W as L,J as M,Q as N,q as a,X as b,U as c,_ as u};
