import{r as i,j as e,F as h,f as M,N as D,a as P,b as k,c as F,s as v,d as R,e as A,g as z,S,D as L,h as b,i as T,P as E,k as G}from"./vendor-Cg58ssI3.js";import{a as O}from"./utils-D0L4_1WI.js";const C=i.createContext(),_=()=>i.useContext(C),U=({children:t})=>{const[n,d]=i.useState({stations:null,devices:null,dateRange:{start:null,end:null}});return e.jsx(C.Provider,{value:{graphParameters:n,setGraphParameters:d},children:t})};function V(){return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"navigation__user",children:[e.jsx("img",{src:"./avatar.webp",alt:"María Pérez",className:"navigation__user--img"}),e.jsx("h5",{className:"navigation__user--name",children:"Valentina Muñoz"}),e.jsx("span",{children:"Usuario"})]})})}function W(){return e.jsx(e.Fragment,{children:e.jsx("section",{className:"navigation__logo",children:e.jsx("a",{href:"#",title:"Acustica Marina",children:e.jsx("img",{src:"./logo.webp",className:"w-36",alt:"Acustina Marina"})})})})}function q(){return e.jsx(e.Fragment,{children:e.jsxs("button",{className:"navigation__logout",children:[e.jsx(h,{icon:M}),e.jsx("span",{children:"Cerrar Sesión"})]})})}function J(){const t=({isActive:n})=>n?"navigation__link navigation__link--active group":"navigation__link group";return e.jsx(e.Fragment,{children:e.jsxs("ul",{className:"navigation__menu",children:[e.jsx("li",{children:e.jsxs(D,{to:"/","aria-label":"dashboard",className:t,children:[e.jsx(h,{icon:P}),e.jsx("span",{className:"-mr-1 font-medium",children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs(D,{to:"/menu2",className:t,disabled:!0,children:[e.jsx(h,{icon:k}),e.jsx("span",{children:"Por definir"})]})}),e.jsx("li",{children:e.jsxs(D,{to:"menu3",className:t,disabled:!0,children:[e.jsx(h,{icon:F}),e.jsx("span",{children:"Por definir"})]})})]})})}const $=[{id:9,devices:[{id:10}]},{id:10,devices:[{id:11}]}];function K(){const{setGraphParameters:t}=_(),[n,d]=i.useState(null),[m,p]=i.useState(null),[x,r]=i.useState([null,null]),[l,u]=i.useState(null),c=$.map(a=>({value:a.id,label:`Estación ${a.id}`,devices:a.devices})),g=a=>{d(a),p(null),u(null),r([null,null]),t(o=>({...o,stations:a?[a.value]:[],devices:[],dateRange:{start:null,end:null}}))},f=a=>{p(a),t(o=>({...o,devices:a?[a.value]:[]}))},y=a=>{if(u(a),a.id==="custom")r([null,null]);else{const[o,w]=a.value;r([o,w]),t(N=>({...N,dateRange:{start:b(o,"yyyy-MM-dd"),end:b(w,"yyyy-MM-dd")}}))}},j=a=>{r(a),a[0]&&a[1]&&t(o=>({...o,dateRange:{start:b(a[0],"yyyy-MM-dd"),end:b(a[1],"yyyy-MM-dd")}}))},s=[{id:"today",label:"Hoy",value:[v(),new Date]},{id:"lastWeek",label:"Última Semana",value:[R(v(),1),new Date]},{id:"last30Days",label:"Últimos 30 días",value:[A(v(),30),new Date]},{id:"last90Days",label:"Últimos 90 días",value:[z(v(),3),new Date]},{id:"custom",label:"Personalizado",value:null}];return e.jsxs("section",{className:"devices-selectors",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"station-select",id:"station-label",children:"Selecciona una estación"}),e.jsx(S,{id:"station-select",onChange:g,options:c,placeholder:"Listado de estaciones",value:n,"aria-labelledby":"station-label"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"device-select",id:"device-label",children:"Selecciona un dispositivo"}),e.jsx(S,{id:"device-select",onChange:f,options:n?n.devices.map(a=>({value:a.id,label:`Dispositivo ${a.id}`})):[],placeholder:"Listado de dispositivos",value:m,isDisabled:!n,"aria-labelledby":"device-label"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"time-select",id:"time-label",children:"Selecciona un rango de tiempo rápido"}),e.jsx(S,{id:"time-select",onChange:y,options:s,placeholder:"Periodo a consultar",value:l,getOptionLabel:a=>a.label,getOptionValue:a=>a.id,isDisabled:!n,"aria-labelledby":"time-label"}),l&&l.id==="custom"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"fle flex-col",children:[e.jsx("label",{htmlFor:"date-picker",id:"date-picker-label",children:"Selecciona un rango de fechas"}),e.jsx(L,{selectsRange:!0,startDate:x[0],endDate:x[1],onChange:j,isClearable:!0,placeholderText:"Selecciona un rango de fechas",dateFormat:"yyyy-MM-dd","aria-labelledby":"date-picker-label"})]})})]})]})}const B=T(E);function Q(){const{graphParameters:t}=_(),[n,d]=i.useState([]),[m,p]=i.useState([]);i.useEffect(()=>{t.stations&&t.devices&&t.dateRange.start&&t.dateRange.end&&(async()=>{try{const c=(await O.get("MonitoringData.json")).data;if(Array.isArray(c)){const g=new Date(t.dateRange.start),f=new Date(t.dateRange.end),y=c.filter(s=>t.stations.includes(s.estacion)&&t.devices.includes(s.dispositivo)&&new Date(s.fecha_captura)>=g&&new Date(s.fecha_captura)<=f&&s.canal==="C1").sort((s,a)=>new Date(s.fecha_captura)-new Date(a.fecha_captura));d(y.map(s=>({x:s.fecha_captura,y:s.nps_global})));const j=c.filter(s=>t.stations.includes(s.estacion)&&t.devices.includes(s.dispositivo)&&new Date(s.fecha_captura)>=g&&new Date(s.fecha_captura)<=f&&s.canal==="C2").sort((s,a)=>new Date(s.fecha_captura)-new Date(a.fecha_captura));p(j.map(s=>({x:s.fecha_captura,y:s.nps_global})))}else console.error("Data fetched is not an array:",c)}catch(u){console.error("Error fetching data:",u)}})()},[t]);const x=[{x:n.map(l=>new Date(l.x)),y:n.map(l=>l.y),type:"scatter",mode:"lines+markers",line:{shape:"spline",color:"blue"},marker:{color:"blue"},name:"Canal C1"},{x:m.map(l=>new Date(l.x)),y:m.map(l=>l.y),type:"scatter",mode:"lines+markers",line:{shape:"spline",color:"red"},marker:{color:"red"},name:"Canal C2"}],r={width:1e3,height:440,title:{text:"NPS Global vs Tiempo por Canal",font:{family:"Arial, sans-serif",size:22,color:"#000",weight:"bold"}},xaxis:{title:"Fecha de Captura",type:"date",tickformat:"%d/%m/%y %H:%M",showgrid:!1,tickfont:{size:10},tickangle:15,zeroline:!0,showline:!0,linecolor:"black",linewidth:1},yaxis:{title:"NPS Global (dB)",showgrid:!1,automargin:!0,zeroline:!0,showline:!0,linecolor:"black",linewidth:1},legend:{x:.5,y:-.3,xanchor:"center",yanchor:"top",orientation:"h"}};return e.jsx(B,{data:x,layout:r,config:{displayModeBar:!0}})}function X(){return e.jsxs("div",{className:"alerts",children:[e.jsx("p",{children:"Selecciona una estación, un dispositivo y define un rango de fechas para visualizar la gráfica."}),e.jsxs("div",{className:"alerts--info",role:"alert",children:[e.jsx(h,{icon:G}),e.jsx("span",{children:'Para este ejemplo, utiliza el rango "Últimos 90 días".'})]})]})}export{V as A,K as D,W as L,J as M,Q as N,q as a,X as b,U as c,_ as u};
